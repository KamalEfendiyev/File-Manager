# Клиент-серверное приложение для управления файлами

Это клиент-серверное приложение позволяет пользователям регистрироваться, входить в систему, загружать и скачивать файлы. Приложение поддерживает базовую аутентификацию.

## 1. Общая информация

Основные функции:
- Регистрация и авторизация пользователей.
- Загрузка файлов на сервер.
- Скачивание файлов с сервера.
- Просмотр списка загруженных файлов.

## 2. Запуск приложения

### 2.1. Установка и подготовка окружения

1. **Установка зависимостей**:
   Убедитесь, что у вас установлены все необходимые зависимости. Если нет, установите их с помощью следующей команды:

   ```bash
   pip install flask flask_sqlalchemy flask_bcrypt
   ```

2. **Создание базы данных**:
   База данных будет создана автоматически при первом запуске сервера, если она не существует.

3. **Создание структуры проекта**:
   Убедитесь, что у вас в проекте присутствует следующая структура:

   ```
   project_folder/
   │
   ├── server.py             # Основной серверный скрипт
   ├── client.py             # Клиент для взаимодействия с сервером
   ├── users.db              # База данных SQLite для хранения пользователей
   ├── uploads/              # Папка для хранения загруженных файлов
   │
   ├── templates/            # Папка с HTML-шаблонами
   │   ├── home.html         # Стартовая страница (логин/регистрация)
   │   ├── register.html     # Страница регистрации
   │   ├── login.html        # Страница входа
   │   └── index.html        # Основная страница с функционалом
   │
   └── .venv/                # Виртуальная среда
   ```

### 2.2. Запуск серверной части

1. Откройте терминал в корневой папке проекта и выполните команду для запуска сервера:

   ```bash
   python server.py
   ```

   Сервер запустится по адресу `http://127.0.0.1:5000`.

2. **Навигация по страницам:**
   - **Главная страница:** `http://127.0.0.1:5000` — выбор между регистрацией и авторизацией.
   - **Регистрация:** `http://127.0.0.1:5000/register` — форма для регистрации нового пользователя.
   - **Вход:** `http://127.0.0.1:5000/login` — форма для авторизации.
   - **Основная страница:** `http://127.0.0.1:5000/index` — страница для работы с файлами после авторизации.

### 2.3. Запуск клиентской части

1. **Загрузка файла на сервер:**
   ```bash
   python client.py upload path/to/your/file.txt
   ```
   Это команда загрузит указанный файл на сервер.

2. **Скачивание файла с сервера:**
   ```bash
   python client.py download filename.txt
   ```
   Эта команда скачает файл `filename.txt`, если он присутствует на сервере.

## 3. Использование API

### 3.1. Регистрация пользователя

**Метод:** `POST`  
**URL:** `/register`  
**Описание:** Регистрирует нового пользователя.

**Параметры:**
- `username` — Имя пользователя.
- `password` — Пароль пользователя.

**Пример запроса:**
curl -X POST http://127.0.0.1:5000/register \
-d "username=new_user&password=secure_password"


### 3.2. Вход пользователя

**Метод:** `POST`  
**URL:** `/login`  
**Описание:** Авторизует пользователя.

**Параметры:**
- `username` — Имя пользователя.
- `password` — Пароль пользователя.

**Пример запроса:**
curl -X POST http://127.0.0.1:5000/login \
-d "username=new_user&password=secure_password"


### 3.3. Загрузка файла

**Метод:** `POST`  
**URL:** `/upload`  
**Описание:** Загружает файл на сервер.

**Параметры:**
- `file` — Загружаемый файл (используйте `multipart/form-data`).

**Пример запроса:**
curl -X POST http://127.0.0.1:5000/upload \
-F "file=@path/to/your/file.txt"


### 3.4. Скачивание файла

**Метод:** `GET`  
**URL:** `/download/<filename>`  
**Описание:** Скачивает файл с сервера по имени.

**Пример запроса:**
curl http://127.0.0.1:5000/files


### 3.5. Получение списка файлов

**Метод:** `GET`  
**URL:** `/files`  
**Описание:** Возвращает список всех загруженных файлов.

**Пример запроса:**
curl http://127.0.0.1:5000/files


### 3.6. Выход пользователя

**Метод:** `GET`  
**URL:** `/logout`  
**Описание:** Завершает сессию пользователя и очищает данные сессии.

**Пример запроса:**
curl http://127.0.0.1:5000/logout

## 4. Обработка больших файлов

Для обработки больших файлов в серверной части используется механизм загрузки и записи файла частями (chunk'ами). Это позволяет избегать перегрузки оперативной памяти при работе с файлами большого объема.

## 5. Замечания

- Убедитесь, что сервер запущен перед выполнением клиентских команд.
- Для безопасности замените секретный ключ `SECRET_KEY` в конфигурации на уникальный.
- В целях улучшения производительности и безопасности рекомендуется использовать веб-серверы и базы данных для продакшн-окружений.
